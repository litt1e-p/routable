var routable=function(e){"use strict";function t(e,t,r,n,o,s,a){try{var i=e[s](a),u=i.value}catch(e){return void r(e)}i.done?t(u):Promise.resolve(u).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise((function(o,s){var a=e.apply(r,n);function i(e){t(a,o,s,i,u,"next",e)}function u(e){t(a,o,s,i,u,"throw",e)}i(void 0)}))}}let n,o;const s=new WeakMap,a=new WeakMap,i=new WeakMap,u=new WeakMap,c=new WeakMap;let d={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return a.get(e);if("objectStoreNames"===t)return e.objectStoreNames||i.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return l(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(b(this),t),l(s.get(this))}:function(...t){return l(e.apply(b(this),t))}:function(t,...r){const n=e.call(b(this),t,...r);return i.set(n,t.sort?t.sort():[t]),l(n)}}function f(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(a.has(e))return;const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});a.set(e,t)}(e),t=e,(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,d):e);var t}function l(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(l(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&s.set(t,e)}).catch(()=>{}),c.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=f(e);return t!==e&&(u.set(e,t),c.set(t,e)),t}const b=e=>c.get(e);const _=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],g=new Map;function h(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(g.get(t))return g.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=v.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!_.includes(r))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let a=s.store;n&&(a=a.index(t.shift()));const i=a[r](...t);return o&&await s.done,i};return g.set(t,s),s}if(d=(e=>({...e,get:(t,r,n)=>h(t,r)||e.get(t,r,n),has:(t,r)=>!!h(t,r)||e.has(t,r)}))(d),!("indexedDB"in window))throw new Error("fatal error: the browser does not support indexedDb");var m="__rtb_db_table",w=function(e,t,{blocked:r,upgrade:n,blocking:o,terminated:s}={}){const a=indexedDB.open(e,t),i=l(a);return n&&a.addEventListener("upgradeneeded",e=>{n(l(a.result),e.oldVersion,e.newVersion,l(a.transaction))}),r&&a.addEventListener("blocked",()=>r()),i.then(e=>{s&&e.addEventListener("close",()=>s()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),i}("__rtb_db_routable",1,{upgrade(e){e.createObjectStore(m)}}),x={__rtb_setSS:(e,t)=>r(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,w;case 2:return r.next=4,r.sent.put(m,t,e);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))(),__rtb_getSS:e=>r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w;case 2:return t.next=4,t.sent.get(m,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))(),__rtb_delSS:e=>r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w;case 2:return t.next=4,t.sent.delete(m,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))(),__rtb_clearSS:()=>r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w;case 2:return e.next=4,e.sent.clear(m);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))(),__rtb_ssKeys:()=>r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w;case 2:return e.next=4,e.sent.getAllKeys(m);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()};const S=function(e,t,r,n,o,s,a,i,u,c){"boolean"!=typeof a&&(u=i,i=a,a=!1);const d="function"==typeof r?r.options:r;let p;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),s?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,u(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=p):t&&(p=a?function(e){t.call(this,c(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,i(e))}),p)if(d.functional){const e=d.render;d.render=function(t,r){return p.call(r),e(t,r)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,p):[p]}return r}({},void 0,{name:"_@litt1e-p/routable",methods:{__rtb_set(e,t){return x.__rtb_setSS.apply(this,[e,t])},__rtb_get(e){return x.__rtb_getSS.call(this,e)},__rtb_erase(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sl,",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gs_l";if(!e||e.length<=0)return"";if(!t){var o=Object.prototype.constructor();return o[n]=btoa(encodeURIComponent(JSON.stringify(e))),o}var s=(new Date).getTime(),a=s.toString().split("").reverse().join(","),i=a.substr(0,a.length-4);this.__rtb_set(r+btoa(i),btoa(encodeURIComponent(JSON.stringify(e))));var u=Object.prototype.constructor();return u[n]=r+btoa((16777215*s<<7).toString(16)).split("").reverse().join(".")+":"+i,u},__rtb_record(e){var t=arguments;return r(regeneratorRuntime.mark((function r(){var n,o,s,a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],o=t.length>2&&void 0!==t[2]?t[2]:"sl,",s=t.length>3&&void 0!==t[3]?t[3]:-21,a=t.length>4&&void 0!==t[4]?t[4]:"gs_l",e&&!(Object.keys(e).length<=0)&&e.hasOwnProperty(a)){r.next=6;break}return r.abrupt("return",{});case 6:if(n){r.next=8;break}return r.abrupt("return",JSON.parse(decodeURIComponent(atob(e[a]))));case 8:return r.next=10,x.__rtb_getSS(o+btoa(e[a].slice(s))).catch((function(e){return!1}));case 10:if(i=r.sent){r.next=13;break}return r.abrupt("return",{});case 13:return r.abrupt("return",JSON.parse(decodeURIComponent(atob(i))));case 14:case"end":return r.stop()}}),r)})))()},__rtb_flush(e){var t=arguments;return r(regeneratorRuntime.mark((function r(){var n,o,s,a,i,u,c,d,p,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:"sl,",o=t.length>2&&void 0!==t[2]?t[2]:-21,s=t.length>3&&void 0!==t[3]?t[3]:"gs_l",r.next=5,x.__rtb_ssKeys();case 5:if(a=r.sent,i=a.length,u=!1,i){r.next=10;break}return r.abrupt("return",u);case 10:if(c=e&&e.hasOwnProperty(s),d=c?e[s]:void 0){r.next=14;break}return r.abrupt("return",u);case 14:p=0;case 15:if(!(p<i)){r.next=24;break}if(f=a[p],!d||0!==f.indexOf(n)||f!==n+btoa(d.slice(o))){r.next=21;break}return x.__rtb_delSS(f),u=!0,r.abrupt("break",24);case 21:p++,r.next=15;break;case 24:return r.abrupt("return",u);case 25:case"end":return r.stop()}}),r)})))()},__rtb_clear(){var e=arguments;return r(regeneratorRuntime.mark((function t(){var r,n,o,s,a,i,u,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"historyBack",n=e.length>1&&void 0!==e[1]?e[1]:"sl,",o=e.length>2&&void 0!==e[2]?e[2]:-21,t.next=5,x.__rtb_ssKeys();case 5:if(s=t.sent,a=s.length,!0,a){t.next=10;break}return t.abrupt("return",!0);case 10:return t.next=12,x.__rtb_getSS(r);case 12:for((i=t.sent)&&(u=n+btoa(i.slice(o))),c=0;c<a;c++)0===(d=s[c]).indexOf(n)&&u!==d&&x.__rtb_delSS(d);return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})))()}}},void 0,void 0,void 0,!1,void 0,void 0,void 0);var y=[S],k=function(e){y.forEach((function(t){e.mixin(t)}))};return"undefined"!=typeof window&&window.Vue&&k(window.Vue),e.Routable=S,e.default=k,e}({});
