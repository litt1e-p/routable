var routable=function(e){"use strict";function t(e,t,r,n,o,s,a){try{var i=e[s](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function r(e){return function(){var r=this,n=arguments;return new Promise((function(o,s){var a=e.apply(r,n);function i(e){t(a,o,s,i,c,"next",e)}function c(e){t(a,o,s,i,c,"throw",e)}i(void 0)}))}}const n=(e,t)=>t.some(t=>e instanceof t);let o,s;const a=new WeakMap,i=new WeakMap,c=new WeakMap,u=new WeakMap,d=new WeakMap;let f={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return i.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return _(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){f=e(f)}function l(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(s||(s=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(v(this),t),_(a.get(this))}:function(...t){return _(e.apply(v(this),t))}:function(t,...r){const n=e.call(v(this),t,...r);return c.set(n,t.sort?t.sort():[t]),_(n)}}function b(e){return"function"==typeof e?l(e):(e instanceof IDBTransaction&&function(e){if(i.has(e))return;const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});i.set(e,t)}(e),n(e,o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,f):e)}function _(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(_(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=b(e);return t!==e&&(u.set(e,t),d.set(t,e)),t}const v=e=>d.get(e);const g=["get","getKey","getAll","getAllKeys","count"],h=["put","add","delete","clear"],m=new Map;function w(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(m.get(t))return m.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=h.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!g.includes(r))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let a=s.store;n&&(a=a.index(t.shift()));const i=a[r](...t);return o&&await s.done,i};return m.set(t,s),s}p(e=>({...e,get:(t,r,n)=>w(t,r)||e.get(t,r,n),has:(t,r)=>!!w(t,r)||e.has(t,r)}));const x=["continue","continuePrimaryKey","advance"],y={},S=new WeakMap,I=new WeakMap,D={get(e,t){if(!x.includes(t))return e[t];let r=y[t];return r||(r=y[t]=function(...e){S.set(this,I.get(this)[t](...e))}),r}};async function*k(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const r=new Proxy(t,D);for(I.set(r,t),d.set(r,v(t));t;)yield r,t=await(S.get(r)||t.continue()),S.delete(r)}function R(e,t){return t===Symbol.asyncIterator&&n(e,[IDBIndex,IDBObjectStore,IDBCursor])||"iterate"===t&&n(e,[IDBIndex,IDBObjectStore])}if(p(e=>({...e,get:(t,r,n)=>R(t,r)?k:e.get(t,r,n),has:(t,r)=>R(t,r)||e.has(t,r)})),!("indexedDB"in window))throw new Error("fatal error: the browser does not support indexedDb");var B="__rtb_db_table",E=function(e,t,{blocked:r,upgrade:n,blocking:o,terminated:s}={}){const a=indexedDB.open(e,t),i=_(a);return n&&a.addEventListener("upgradeneeded",e=>{n(_(a.result),e.oldVersion,e.newVersion,_(a.transaction))}),r&&a.addEventListener("blocked",()=>r()),i.then(e=>{s&&e.addEventListener("close",()=>s()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),i}("__rtb_db_routable",1,{upgrade(e){e.createObjectStore(B)}}),C={__rtb_setSS:(e,t)=>r(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,E;case 2:return r.next=4,r.sent.put(B,t,e);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))(),__rtb_getSS:e=>r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E;case 2:return t.next=4,t.sent.get(B,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))(),__rtb_delSS:e=>r(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E;case 2:return t.next=4,t.sent.delete(B,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))(),__rtb_clearSS:()=>r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E;case 2:return e.next=4,e.sent.clear(B);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))(),__rtb_ssKeys:()=>r(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E;case 2:return e.next=4,e.sent.getAllKeys(B);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()};const O=function(e,t,r,n,o,s,a,i,c,u){"boolean"!=typeof a&&(c=i,i=a,a=!1);const d="function"==typeof r?r.options:r;let f;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),s?(f=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=f):t&&(f=a?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,i(e))}),f)if(d.functional){const e=d.render;d.render=function(t,r){return f.call(r),e(t,r)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,f):[f]}return r}({},void 0,{name:"_@litt1e-p/routable",methods:{__rtb_set(e,t){return C.__rtb_setSS.apply(this,[e,t])},__rtb_get(e){return C.__rtb_getSS.call(this,e)},__rtb_erase(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sl,",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gs_l";if(!e||e.length<=0)return"";if(!t){var o=Object.prototype.constructor();return o[n]=btoa(encodeURIComponent(JSON.stringify(e))),o}var s=(new Date).getTime(),a=s.toString().split("").reverse().join(","),i=a.substr(0,a.length-4);this.__rtb_set(r+btoa(i),btoa(encodeURIComponent(JSON.stringify(e))));var c=Object.prototype.constructor();return c[n]=r+btoa((16777215*s<<7).toString(16)).split("").reverse().join(".")+":"+i,c},__rtb_record(e){var t=arguments;return r(regeneratorRuntime.mark((function r(){var n,o,s,a,i;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],o=t.length>2&&void 0!==t[2]?t[2]:"sl,",s=t.length>3&&void 0!==t[3]?t[3]:-21,a=t.length>4&&void 0!==t[4]?t[4]:"gs_l",e&&!(Object.keys(e).length<=0)&&e.hasOwnProperty(a)){r.next=6;break}return r.abrupt("return",{});case 6:if(n){r.next=8;break}return r.abrupt("return",JSON.parse(decodeURIComponent(atob(e[a]))));case 8:return r.next=10,C.__rtb_getSS(o+btoa(e[a].slice(s))).catch((function(e){return!1}));case 10:if(i=r.sent){r.next=13;break}return r.abrupt("return",{});case 13:return r.abrupt("return",JSON.parse(decodeURIComponent(atob(i))));case 14:case"end":return r.stop()}}),r)})))()},__rtb_flush(e){var t=arguments;return r(regeneratorRuntime.mark((function r(){var n,o,s,a,i,c,u,d,f,p;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:"sl,",o=t.length>2&&void 0!==t[2]?t[2]:-21,s=t.length>3&&void 0!==t[3]?t[3]:"gs_l",r.next=5,C.__rtb_ssKeys();case 5:if(a=r.sent,i=a.length,c=!1,i){r.next=10;break}return r.abrupt("return",c);case 10:if(u=e&&e.hasOwnProperty(s),d=u?e[s]:void 0){r.next=14;break}return r.abrupt("return",c);case 14:f=0;case 15:if(!(f<i)){r.next=24;break}if(p=a[f],!d||0!==p.indexOf(n)||p!==n+btoa(d.slice(o))){r.next=21;break}return C.__rtb_delSS(p),c=!0,r.abrupt("break",24);case 21:f++,r.next=15;break;case 24:return r.abrupt("return",c);case 25:case"end":return r.stop()}}),r)})))()},__rtb_clear(){var e=arguments;return r(regeneratorRuntime.mark((function t(){var r,n,o,s,a,i,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"historyBack",n=e.length>1&&void 0!==e[1]?e[1]:"sl,",o=e.length>2&&void 0!==e[2]?e[2]:-21,t.next=5,C.__rtb_ssKeys();case 5:if(s=t.sent,a=s.length,!0,a){t.next=10;break}return t.abrupt("return",!0);case 10:return t.next=12,C.__rtb_getSS(r);case 12:for((i=t.sent)&&(c=n+btoa(i.slice(o))),u=0;u<a;u++)0===(d=s[u]).indexOf(n)&&c!==d&&C.__rtb_delSS(d);return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})))()}}},void 0,void 0,void 0,!1,void 0,void 0,void 0);var j=[O],L=function(e){j.forEach((function(t){e.mixin(t)}))};return"undefined"!=typeof window&&window.Vue&&L(window.Vue),e.Routable=O,e.default=L,e}({});
