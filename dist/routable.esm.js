function e(e,t,r,n,o,s,a){try{var i=e[s](a),c=i.value}catch(e){return void r(e)}i.done?t(c):Promise.resolve(c).then(n,o)}function t(t){return function(){var r=this,n=arguments;return new Promise((function(o,s){var a=t.apply(r,n);function i(t){e(a,o,s,i,c,"next",t)}function c(t){e(a,o,s,i,c,"throw",t)}i(void 0)}))}}let r,n;const o=new WeakMap,s=new WeakMap,a=new WeakMap,i=new WeakMap,c=new WeakMap;let u={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return s.get(e);if("objectStoreNames"===t)return e.objectStoreNames||a.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return f(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function d(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(n||(n=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(l(this),t),f(o.get(this))}:function(...t){return f(e.apply(l(this),t))}:function(t,...r){const n=e.call(l(this),t,...r);return a.set(n,t.sort?t.sort():[t]),f(n)}}function p(e){return"function"==typeof e?d(e):(e instanceof IDBTransaction&&function(e){if(s.has(e))return;const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("complete",o),e.removeEventListener("error",s),e.removeEventListener("abort",s)},o=()=>{t(),n()},s=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",o),e.addEventListener("error",s),e.addEventListener("abort",s)});s.set(e,t)}(e),t=e,(r||(r=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,u):e);var t}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,r)=>{const n=()=>{e.removeEventListener("success",o),e.removeEventListener("error",s)},o=()=>{t(f(e.result)),n()},s=()=>{r(e.error),n()};e.addEventListener("success",o),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),c.set(t,e),t}(e);if(i.has(e))return i.get(e);const t=p(e);return t!==e&&(i.set(e,t),c.set(t,e)),t}const l=e=>c.get(e);const b=["get","getKey","getAll","getAllKeys","count"],_=["put","add","delete","clear"],v=new Map;function g(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(v.get(t))return v.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,o=_.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!o&&!b.includes(r))return;const s=async function(e,...t){const s=this.transaction(e,o?"readwrite":"readonly");let a=s.store;n&&(a=a.index(t.shift()));const i=a[r](...t);return o&&await s.done,i};return v.set(t,s),s}if(u=(e=>({...e,get:(t,r,n)=>g(t,r)||e.get(t,r,n),has:(t,r)=>!!g(t,r)||e.has(t,r)}))(u),!("indexedDB"in window))throw new Error("fatal error: the browser does not support indexedDb");var h="__rtb_db_table",m=function(e,t,{blocked:r,upgrade:n,blocking:o,terminated:s}={}){const a=indexedDB.open(e,t),i=f(a);return n&&a.addEventListener("upgradeneeded",e=>{n(f(a.result),e.oldVersion,e.newVersion,f(a.transaction))}),r&&a.addEventListener("blocked",()=>r()),i.then(e=>{s&&e.addEventListener("close",()=>s()),o&&e.addEventListener("versionchange",()=>o())}).catch(()=>{}),i}("__rtb_db_routable",1,{upgrade(e){e.createObjectStore(h)}}),x={__rtb_setSS:(e,r)=>t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m;case 2:return t.next=4,t.sent.put(h,r,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))(),__rtb_getSS:e=>t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m;case 2:return t.next=4,t.sent.get(h,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))(),__rtb_delSS:e=>t(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,m;case 2:return t.next=4,t.sent.delete(h,e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})))(),__rtb_clearSS:()=>t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return e.next=4,e.sent.clear(h);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))(),__rtb_ssKeys:()=>t(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m;case 2:return e.next=4,e.sent.getAllKeys(h);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()};const w=function(e,t,r,n,o,s,a,i,c,u){"boolean"!=typeof a&&(c=i,i=a,a=!1);const d="function"==typeof r?r.options:r;let p;if(e&&e.render&&(d.render=e.render,d.staticRenderFns=e.staticRenderFns,d._compiled=!0,o&&(d.functional=!0)),n&&(d._scopeId=n),s?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,c(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},d._ssrRegister=p):t&&(p=a?function(e){t.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){t.call(this,i(e))}),p)if(d.functional){const e=d.render;d.render=function(t,r){return p.call(r),e(t,r)}}else{const e=d.beforeCreate;d.beforeCreate=e?[].concat(e,p):[p]}return r}({},void 0,{name:"_@litt1e-p/routable",methods:{__rtb_set(e,t){return x.__rtb_setSS.apply(this,[e,t])},__rtb_get(e){return x.__rtb_getSS.call(this,e)},__rtb_erase(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"sl,",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"gs_l";if(!e||e.length<=0)return"";if(!t){var o=Object.prototype.constructor();return o[n]=btoa(encodeURIComponent(JSON.stringify(e))),o}var s=(new Date).getTime(),a=s.toString().split("").reverse().join(","),i=a.substr(0,a.length-4);this.__rtb_set(r+btoa(i),btoa(encodeURIComponent(JSON.stringify(e))));var c=Object.prototype.constructor();return c[n]=r+btoa((16777215*s<<7).toString(16)).split("").reverse().join(".")+":"+i,c},__rtb_record(e){var r=arguments;return t(regeneratorRuntime.mark((function t(){var n,o,s,a,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],o=r.length>2&&void 0!==r[2]?r[2]:"sl,",s=r.length>3&&void 0!==r[3]?r[3]:-21,a=r.length>4&&void 0!==r[4]?r[4]:"gs_l",e&&!(Object.keys(e).length<=0)&&e.hasOwnProperty(a)){t.next=6;break}return t.abrupt("return",{});case 6:if(n){t.next=8;break}return t.abrupt("return",JSON.parse(decodeURIComponent(atob(e[a]))));case 8:return t.next=10,x.__rtb_getSS(o+btoa(e[a].slice(s))).catch((function(e){return!1}));case 10:if(i=t.sent){t.next=13;break}return t.abrupt("return",{});case 13:return t.abrupt("return",JSON.parse(decodeURIComponent(atob(i))));case 14:case"end":return t.stop()}}),t)})))()},__rtb_flush(e){var r=arguments;return t(regeneratorRuntime.mark((function t(){var n,o,s,a,i,c,u,d,p,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"sl,",o=r.length>2&&void 0!==r[2]?r[2]:-21,s=r.length>3&&void 0!==r[3]?r[3]:"gs_l",t.next=5,x.__rtb_ssKeys();case 5:if(a=t.sent,i=a.length,c=!1,i){t.next=10;break}return t.abrupt("return",c);case 10:if(u=e&&e.hasOwnProperty(s),d=u?e[s]:void 0){t.next=14;break}return t.abrupt("return",c);case 14:p=0;case 15:if(!(p<i)){t.next=24;break}if(f=a[p],!d||0!==f.indexOf(n)||f!==n+btoa(d.slice(o))){t.next=21;break}return x.__rtb_delSS(f),c=!0,t.abrupt("break",24);case 21:p++,t.next=15;break;case 24:return t.abrupt("return",c);case 25:case"end":return t.stop()}}),t)})))()},__rtb_clear(){var e=arguments;return t(regeneratorRuntime.mark((function t(){var r,n,o,s,a,i,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:"historyBack",n=e.length>1&&void 0!==e[1]?e[1]:"sl,",o=e.length>2&&void 0!==e[2]?e[2]:-21,t.next=5,x.__rtb_ssKeys();case 5:if(s=t.sent,a=s.length,!0,a){t.next=10;break}return t.abrupt("return",!0);case 10:return t.next=12,x.__rtb_getSS(r);case 12:for((i=t.sent)&&(c=n+btoa(i.slice(o))),u=0;u<a;u++)0===(d=s[u]).indexOf(n)&&c!==d&&x.__rtb_delSS(d);return t.abrupt("return",!0);case 16:case"end":return t.stop()}}),t)})))()}}},void 0,void 0,void 0,!1,void 0,void 0,void 0);var S=[w],y=function(e){S.forEach((function(t){e.mixin(t)}))};"undefined"!=typeof window&&window.Vue&&y(window.Vue);export default y;export{w as Routable};
